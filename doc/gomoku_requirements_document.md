# 五目並べ 実装仕様書

## ドキュメント管理

### 変更履歴
| バージョン | 日付 | 変更内容 |
|:---:|:---|:---|
| v1.0 | 2025/11/25 | 初版作成 |

### 文書の目的
本仕様書は、Webポータル「GAME PORTAL」に実装する「五目並べ（Gomoku）」ゲームの要件を定義する。GitHub Copilotによる自動生成を前提とし、必要な機能・UI・ロジックを明確化する。

## 1. プロジェクト概要

### 1.1 ゲームコンセプト
- **ジャンル**: 戦略ボードゲーム
- **目的**: 縦・横・斜めのいずれかで5つの石を揃える
- **特徴**:
  - 15×15または19×19の碁盤
  - シンプルなルールで深い戦略性
  - 3段階のCPU対戦レベル

### 1.2 技術要件
- **使用言語**: HTML5, CSS3, JavaScript (ES6+)
- **フレームワーク**: なし（Vanilla JS）
- **ブラウザ要件**: モダンブラウザ（Chrome, Firefox, Safari, Edge 最新版）
- **レスポンシブ対応**: PC・タブレット・スマートフォン

## 2. ゲーム仕様


## 基本要件
- ブラウザで動作する 15×15（または 19×19）五目並べ
- デフォルト：15×15
- 使用技術：HTML、CSS、JavaScript（フレームワークなし）
- プレイヤーは黒 → 白 → 黒 → 白 … の交互ターン
- マスをクリックすると石を置く
- 置けるのは空きマスのみ
- 縦・横・斜めの4方向のいずれかで石が5つ連続したら勝利
- 引き分け判定（盤面がすべて埋まった場合）
- CPU対戦も実装し、3段階レベルで選択
    - レベル1：ランダム合法手
    - レベル2：単純評価（3連, 4連に重み付け）
    - レベル3：ミニマックス（深さ2〜3）+ 評価関数


## UI 要件
- 15×15 の盤面グリッドを表示
    - CSSで綺麗な交点ラインを表示
    - 石は黒と白の円で描画
- 画面上に現在のターン（黒 or 白）を表示
- 盤面リセットボタン
- ゲームモード選択画面
    - プレイヤー vs プレイヤー
    - プレイヤー vs CPU（レベル選択）
- 勝敗がついたらモーダルで結果表示
- レスポンシブ対応（スマホでも操作可能）


## ロジック要件
### ゲームフロー
1. ゲーム開始時に盤面を初期化
2. プレイヤーの入力（クリック）を受け付ける
3. 合法手（空マスかどうか）をチェック
4. 石を置く
5. 勝敗判定
6. 続行ならターン交代
7. CPUの場合 CPU の手を実行
8. 勝敗が決まったら終了処理


## CPU対戦ロジック
- レベル1：ランダム
    - 合法手の中からランダム選択
- レベル2：評価関数（軽量）
    - 以下パターンにスコアを付与
        - 4連（勝ち確）
        - 3連（強い）
        - 2連
    - スコア最大の手を選択
- レベル3：ミニマックス（深さ2〜3）
    - 盤面をシミュレーション
    - αβ剪定（optional）
    - 評価関数：
        - 自分の4連：+10000
        - 相手の4連：-9000
        - 自分の3連：+300
        - 相手の3連：-200
        - 自分の2連：+30
        - 相手の2連：-20


## デバッグ要件（任意）
- クリック座標を console.log
- CPUの評価値をログ出力
- 勝敗決定時に盤面をログ表示
- 連続数判定のログを出す