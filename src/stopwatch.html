<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⏱️ ストップウォッチチャレンジ - GAME PORTAL</title>
    <link rel="stylesheet" href="stopwatch.css">
    <link rel="stylesheet" href="../assets/css/game-page.css">
    <script src="../assets/js/i18n.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="../index.html" class="nav-logo">GAME PORTAL</a>
            <h1 data-i18n="stopwatch.title">⏱️ ストップウォッチチャレンジ</h1>
            <div class="header-actions">
                <a href="../index.html" class="back-button" data-i18n="common.backHome">← ホームに戻る</a>
                <div class="language-selector">
                    <button class="lang-btn" id="langBtn">🌐 日本語</button>
                    <div class="lang-dropdown" id="langDropdown">
                        <button onclick="changeLanguage('en')">🇬🇧 English</button>
                        <button onclick="changeLanguage('ja')">🇯🇵 日本語</button>
                        <button onclick="changeLanguage('zh')">🇨🇳 中文</button>
                        <button onclick="changeLanguage('hi')">🇮🇳 हिन्दी</button>
                        <button onclick="changeLanguage('es')">🇪🇸 Español</button>
                        <button onclick="changeLanguage('fr')">🇫🇷 Français</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="game-container">
        <!-- 開始画面 -->
        <div id="startScreen" class="screen active">
            <div class="intro-section">
                <h2 data-i18n="stopwatch.subtitle">目標時間ぴったりで止めろ!</h2>
                
                <details class="rules-section">
                    <summary data-i18n="stopwatch.rulesTitle">ルール説明</summary>
                    <ul class="rules-list">
                        <li data-i18n="stopwatch.rule1">3ターン制(3秒・5秒・10秒)</li>
                        <li data-i18n="stopwatch.rule2">スタートボタンで計測開始</li>
                        <li data-i18n="stopwatch.rule3">目標時間で停止ボタンを押す</li>
                        <li data-i18n="stopwatch.rule4">誤差が少ないほど高ランク</li>
                        <li data-i18n="stopwatch.rule5">合計誤差で総合評価</li>
                    </ul>
                </details>

                <button id="startGameBtn" class="primary-button" data-i18n="stopwatch.startGame">ゲーム開始</button>
            </div>
        </div>

        <!-- メインゲーム画面 -->
        <div id="gameScreen" class="screen">
            <div class="game-info">
                <div class="turn-display">
                    <span data-i18n="stopwatch.turn">ターン</span> <span id="currentTurn">1</span>/3
                </div>
                <div class="target-display">
                    <span data-i18n="stopwatch.target">目標</span>: <span id="targetTime">3.000</span><span data-i18n="stopwatch.seconds">秒</span>
                </div>
            </div>

            <div class="timer-section">
                <div id="timerDisplay" class="timer-display">0.000</div>
                <div id="statusIndicator" class="status-indicator" data-i18n="stopwatch.waiting">待機中</div>
            </div>

            <div class="controls">
                <button id="startBtn" class="control-button start-button" data-i18n="stopwatch.start">スタート</button>
                <button id="stopBtn" class="control-button stop-button" disabled data-i18n="stopwatch.stop">ストップ</button>
                <button id="resetBtn" class="control-button reset-button" data-i18n="stopwatch.reset">リセット</button>
            </div>

            <!-- ターン結果表示 -->
            <div id="turnResult" class="turn-result hidden">
                <h3 data-i18n="stopwatch.result">結果</h3>
                <div class="result-details">
                    <div class="result-item">
                        <span data-i18n="stopwatch.elapsed">記録時間</span>: <span id="resultElapsed">0.000</span><span data-i18n="stopwatch.seconds">秒</span>
                    </div>
                    <div class="result-item">
                        <span data-i18n="stopwatch.error">誤差</span>: <span id="resultError">0.000</span><span data-i18n="stopwatch.seconds">秒</span>
                    </div>
                    <div class="rank-badge-container">
                        <div id="rankBadge" class="rank-badge">-</div>
                    </div>
                </div>
                <button id="nextTurnBtn" class="primary-button" data-i18n="stopwatch.nextTurn">次のターンへ</button>
            </div>
        </div>

        <!-- 最終結果画面 -->
        <div id="resultScreen" class="screen">
            <div class="final-result">
                <h2 data-i18n="stopwatch.finalResultTitle">最終結果</h2>
                
                <div class="results-summary">
                    <div class="turn-summary" id="turn1Summary">
                        <h4><span data-i18n="stopwatch.turn">ターン</span> 1 (3<span data-i18n="stopwatch.seconds">秒</span>)</h4>
                        <p><span data-i18n="stopwatch.elapsed">記録</span>: <span id="turn1Elapsed">-</span></p>
                        <p><span data-i18n="stopwatch.error">誤差</span>: <span id="turn1Error">-</span></p>
                        <p><span data-i18n="stopwatch.rank">ランク</span>: <span id="turn1Rank" class="rank-text">-</span></p>
                    </div>
                    <div class="turn-summary" id="turn2Summary">
                        <h4><span data-i18n="stopwatch.turn">ターン</span> 2 (5<span data-i18n="stopwatch.seconds">秒</span>)</h4>
                        <p><span data-i18n="stopwatch.elapsed">記録</span>: <span id="turn2Elapsed">-</span></p>
                        <p><span data-i18n="stopwatch.error">誤差</span>: <span id="turn2Error">-</span></p>
                        <p><span data-i18n="stopwatch.rank">ランク</span>: <span id="turn2Rank" class="rank-text">-</span></p>
                    </div>
                    <div class="turn-summary" id="turn3Summary">
                        <h4><span data-i18n="stopwatch.turn">ターン</span> 3 (10<span data-i18n="stopwatch.seconds">秒</span>)</h4>
                        <p><span data-i18n="stopwatch.elapsed">記録</span>: <span id="turn3Elapsed">-</span></p>
                        <p><span data-i18n="stopwatch.error">誤差</span>: <span id="turn3Error">-</span></p>
                        <p><span data-i18n="stopwatch.rank">ランク</span>: <span id="turn3Rank" class="rank-text">-</span></p>
                    </div>
                </div>

                <div class="total-score">
                    <div class="total-error">
                        <span data-i18n="stopwatch.totalError">合計誤差</span>: <span id="totalErrorDisplay">0.000</span><span data-i18n="stopwatch.seconds">秒</span>
                    </div>
                    <div class="final-rank-container">
                        <h3 data-i18n="stopwatch.finalRank">総合ランク</h3>
                        <div id="finalRankBadge" class="rank-badge large">-</div>
                        <div id="rankMessage" class="rank-message">-</div>
                    </div>
                </div>

                <div class="final-buttons">
                    <button id="playAgainBtn" class="primary-button" data-i18n="stopwatch.playAgain">もう一度プレイ</button>
                    <a href="../index.html" class="secondary-button" data-i18n="stopwatch.backHome">ホームに戻る</a>
                </div>
            </div>
        </div>
    </main>

    <script src="stopwatch.js"></script>
</body>
</html>
